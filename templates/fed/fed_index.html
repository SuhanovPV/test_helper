{% extends 'base.html' %}
{% block content%}
    {{ super() }}
    <div>
        <script  type="text/javascript" src="{{ url_for('static', filename='js/make_visible.js') }}"></script>

        <form action="" method="post">
            {{ form.version.csrf_token }}
            <div class="fed-version">
                {% for field in form.version %}
                    {% if field.errors %}
                        <div class="errors">
                            {% for e in field.errors %}
                                <p>{{ e }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endfor %}
                <div class="version-element">
                    <p>Версия:</p>
                </div>
                {% for field in form.version if field.name.split('-')[1] not in ['visible', 'csrf_token'] %}
                    <div class="version-element">
                        {% if field.errors %}
                            <p class="errors">{{ field }}</p>
                        {% else %}
                            <p>{{ field }}</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            {% for f in form if f.id[:8] == 'schedule' %}
                {% set ns = namespace(div_class = 'invisible') %}
                {% if f.visible.data %}
                    {% set ns.div_class = 'schedule' %}
                {% endif %}
                <div class="{{ ns.div_class }}">
                    {{ f.csrf_token }}
                    <p style="display: none">{{f.visible}}</p>
                    <div class="left">
                        <div>
                            <div class="label">{{ f.title.label}}</div><div class="input">{{ f.title}}</div>
                        </div>
                        <div>
                            <div class="label"><label>Время</label></div>
                            <div class="input">{{ f.start_time }} - {{ f.end_time }}</div>
                        </div>
                    </div>
                    {% for field in f if field.name.split('-')[1] not in ['visible', 'csrf_token', 'title', 'start_time', 'end_time'] %}
                        {% if field.errors %}
                            {% for e in field.errors %}
                                <p>{{ e }}</p>
                            {% endfor %}
                        {% endif %}
                        <p>{{ field.label }} {{ field }}<p>
                    {% endfor %}
                </div>
            {% endfor %}
            <input type="button" value="Добавить событие" onclick="makeVisible()">
            <hr>
            {{ form.submit }}
        </form>
    </div>

{% endblock %}